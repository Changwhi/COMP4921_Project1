<!DOCTYPE html>
<html>
<%- include("templates/header") %>

  <body>
    <section class="section">
      <div class="maincolumns columns is-desktop is-vcentered">
        <div class="column is-10 is-offset-1 notification is-info is-light box container">
          <div class="column">
            <h1 class="title is-1">Links</h1>
          </div>
          <div class="column">
            <div class="columns is-centered">
              <table class="table">
                <thead>
                  <tr>
                    <th>URL</th>
                    <th>Short URL</th>
                    <th>Hits</th>
                    <th>Active</th>
                    <th>Created</th>
                    <th>Last Hit</th>
                  </tr>
                </thead>
                <tbody>
                  <% if (locals.url) { %>
                    <% let i=0; %>
                      <% for(i=0; i < url.length; i++) { %>
                        <tr>
                          <td>
                            <a href="<%= url[i]['original_url'] %>">
                              <%= url[i]['original_url'] %>
                            </a>
                            <strong></strong>
                          </td>
                          <td>
                            <a href="/sl?id=<%= url[i]['short_url_uuid'] %>">http://localhost:3000/sl/?id=<%=
                                url[i]['short_url_uuid'] %></a>
                            <strong></strong>
                          </td>
                          <td>
                            <%= url[i]['hits'] %>
                          </td>

                          <% if (url[i]["active"]===1) { %>
                            <td>
                              <input type="checkbox" checked />
                            </td>

                            <% } else { %>
                              <td>
                                <input type="checkbox" />
                              </td>

                              <% } %>
                                <td>
                                  <% const createdDate=new Date(url[i]['created']); %>
                                    <%= createdDate.getFullYear() %>/
                                      <%= (createdDate.getMonth() + 1).toString().padStart(2, '0' ) %>/
                                        <%= createdDate.getDate().toString().padStart(2, '0' ) %>
                                </td>
                                </td>
                                <td>
                                  <%= url[i]['last_hit'] %>
                                </td>
                        </tr>
                        <% } %>
                          <% } %>
                </tbody>
              </table>
            </div>
            <div class="column is-centered">
              <form action="/addUrl" method="post">
                <input type="hidden" name="user_id" value="<%= %>" />
                <div class="field is-horizontal">
                  <div class="field-label is-normal">
                    <label class="label">Add URL</label>
                  </div>
                  <div class="field-body">
                    <div class="field">
                      <p class="control is-expanded">
                        <input name="url" class="input" type="text" placeholder="URL" />
                      </p>
                    </div>
                    <div class="field">
                      <button class="button is-link">
                        <span>Add</span>
                        <span class="icon is-small">
                        </span>
                      </button>
                    </div>
                  </div>
                </div>
              </form>
            </div>

          </div>
        </div>
      </div>
    </section>
  </body>

</html>
